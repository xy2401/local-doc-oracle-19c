<!-- NewPage -->
<!DOCTYPE html>
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_181) on Mon Jan 07 09:53:14 PST 2019 -->
<title>XStreamLCRCallbackHandler (Oracle Database XStream Java API Reference)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="date" content="2019-01-07">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<meta name="generator" content="Oracle ST-Doc Jadey 2.5">

    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.created" content="2019-02-19T09:04:03+00:00">
    <meta name="dcterms.title" content="Oracle® Database XStream Java API Reference">
    <meta name="dcterms.category" content="database">
    <meta name="dcterms.isVersionOf" content="STXJV">
    <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
    <meta name="dcterms.identifier" content="E96285-02">
    <meta name="dcterms.release" content="Release 19">
  <script id="ssot-metadata" type="application/json"> {"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}} </script>
    </head>
<body>
<script type="text/javascript">
<!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="XStreamLCRCallbackHandler (Oracle Database XStream Java API Reference)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script> <noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="topNav"><a name="navbar_top" id="navbar_top"><!--   --></a>
<div class="skipNav"><a href="#skip_navbar_top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar_top_firstrow" id="navbar_top_firstrow"><!--   --></a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Oracle® Database XStream Java API Reference<br>
19c</b><br>
E96285-02</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="XStreamIn.html" title="class in oracle.streams"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="XStreamOut.html" title="class in oracle.streams"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html" target="_top">Frames</a></li>
<li><a href="XStreamLCRCallbackHandler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript">
<!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script></div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip_navbar_top" id="skip_navbar_top"><!--   --></a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">oracle.streams</div>
<h2 title="Interface XStreamLCRCallbackHandler" class="title">Interface XStreamLCRCallbackHandler</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public interface <span class="typeNameLabel">XStreamLCRCallbackHandler</span></pre>
<div class="block">The XStreamLCRCallbackHandler interface enables clients to receive LCRs and chunk data from an XStream outbound server or send LCRs and chunk data to an XStream inbound server using a callback mechanism. This interface is the callback interface for LCR handling in Oracle XStream.<br>
A Client Application needs to implement this interface for using XStream Inbound and/or Outbound, and process/create the LCR according to their requirements through callback mechanism.<br>
<ul>
<li>The processLCR() interface is the callback method used for XStreamOut to deliver LCRs to a client application.<br></li>
<li>The processChunk() interface is the callback method used for XStreamOut to deliver chunk data to a client application.<br></li>
<li>The createLCR() interface is the callback method used for XStreamIn to retrieve LCRs from a client application.<br></li>
<li>The createChunk() interface is the callback method used for XStreamIn to retrieve chunk data from a client application.<br></li>
</ul>
</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="XStreamIn.html" title="class in oracle.streams"><code>XStreamIn</code></a>, <a href="XStreamOut.html" title="class in oracle.streams"><code>XStreamOut</code></a>, <a href="LCR.html" title="interface in oracle.streams"><code>LCR</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList"><!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary" id="method_summary"><!--   --></a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="ChunkColumnValue.html" title="interface in oracle.streams">ChunkColumnValue</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="XStreamLCRCallbackHandler.html#createChunk__">createChunk</a></span>()</code>
<div class="block">The callback method for constructing chunk data that is sent to an XStream inbound server.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="LCR.html" title="interface in oracle.streams">LCR</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="XStreamLCRCallbackHandler.html#createLCR__">createLCR</a></span>()</code>
<div class="block">The callback method for creating an LCR and sending it to an XStream inbound server.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="XStreamLCRCallbackHandler.html#processChunk_oracle_streams_ChunkColumnValue_">processChunk</a></span>(<a href="ChunkColumnValue.html" title="interface in oracle.streams">ChunkColumnValue</a>&nbsp;chunk)</code>
<div class="block">The callback method for processing chunk data received from an XStream outbound server for an LCR received through the processLCR callback method.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="XStreamLCRCallbackHandler.html#processLCR_oracle_streams_LCR_">processLCR</a></span>(<a href="LCR.html" title="interface in oracle.streams">LCR</a>&nbsp;lcr)</code>
<div class="block">The callback method for processing an LCR recevied from an XStream outbound server.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList"><!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail" id="method_detail"><!--   --></a>
<h3>Method Detail</h3>
<a name="processLCR_oracle_streams_LCR_" id="processLCR_oracle_streams_LCR_"><!--   --></a>
<ul class="blockList">
<li class="blockList">
<h4>processLCR</h4>
<pre>void processLCR(<a href="LCR.html" title="interface in oracle.streams">LCR</a> lcr)
         throws <a href="StreamsException.html" title="class in oracle.streams">StreamsException</a></pre>
<div class="block">The callback method for processing an LCR recevied from an XStream outbound server.<br>
You must implement the LCR handling logic in this method. If XStream Out is not used, you can provide an empty implementation of this method.<br>
<br>
To process an LCR with LOB columns, you must also use the processchunk API to retrieve the streaming chunk data.<br>
The following is an example of implementing this API:<br>
Note that the example is not a complete implementation and only illustrates how to process an LCR using the XStream APIs.<br>
<pre>

  public void processLCR(LCR lcr)
    throws StreamsException
  {
    // access LCR header info
    String cmdtype   = lcr.getCommandType();
    String srcDB     = lcr.getSourceDatabaseName();
    String objOwner  = lcr.getObjectOwner();
    String objName   = lcr.getObjectName();
    String txnId     = lcr.getTransactionId();
    DATE   srcTime   = lcr.getSourceTime();
    byte[] pos       = lcr.getPosition());
    ...

    // access scalar columns
    if (lcr instanceof RowLCR)
    {
      if ((lcr.getCommandType()).compareTo(RowLCR.INSERT) == 0)
      { 
        // access scalar columns in new column list
        ColumnValue[] collist = ((RowLCR)lcr).getNewValues();
        for (int i = 0; i &lt; collist.length; i++)
        {
          String colName = collist[i].getColumnName();
          Datum colData = collist[i].getColumnData();
          if (colData instanceof NUMBER)
          {
            System.out.println(((NUMBER)coldata).intValue());
          }
          else if(colData instanceof CHAR)
          {
            System.out.println(((CHAR)colData).stringValue());
            System.out.println(((CHAR)colData).oracleId());
          }
          ...
        }

        if (((RowLCR)lcr).hasChunkData())
        {
          // prepare to retrieve all LOB columns through
          // processChunk() callback method.
        }
      }
      ...
    }
    else
    {
      // handle DDL LCR.
    }
  }
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lcr</code> - the LCR received from an XStream outbound server.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="StreamsException.html" title="class in oracle.streams">StreamsException</a></code> - if error occurs when processing an LCR.</dd>
</dl>
</li>
</ul>
<a name="processChunk_oracle_streams_ChunkColumnValue_" id="processChunk_oracle_streams_ChunkColumnValue_"><!--   --></a>
<ul class="blockList">
<li class="blockList">
<h4>processChunk</h4>
<pre>void processChunk(<a href="ChunkColumnValue.html" title="interface in oracle.streams">ChunkColumnValue</a> chunk)
           throws <a href="StreamsException.html" title="class in oracle.streams">StreamsException</a></pre>
<div class="block">The callback method for processing chunk data received from an XStream outbound server for an LCR received through the processLCR callback method.<br>
You must implement the chunk handling logic in this method. If XStream Out is not used, you can provide an empty implementation of this method.<br>
<br>
The following is an example of implementing this API:<br>
Note that the example is not a complete implementation and only illustrates how to process chunk data using the XStream APIs.<br>
<pre>

  public void processChunk(ChunkColumnValue chunk)
    throws StreamsException
  {
    // process the chunk data
    Datum coldata = chunk.getColumnData();
    String colname = chunk.getColumnName();
    ... 

    if (chunk.isLastChunk())
      // do something for the column
    if (chunk.isEndOfRow())
      // do something for the entire row change, cleanup
  }
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>chunk</code> - the chunk received from an XStream outbound server.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="StreamsException.html" title="class in oracle.streams">StreamsException</a></code> - if error occurs when processing chunk data.</dd>
</dl>
</li>
</ul>
<a name="createLCR__" id="createLCR__"><!--   --></a>
<ul class="blockList">
<li class="blockList">
<h4>createLCR</h4>
<pre><a href="LCR.html" title="interface in oracle.streams">LCR</a> createLCR()
       throws <a href="StreamsException.html" title="class in oracle.streams">StreamsException</a></pre>
<div class="block">The callback method for creating an LCR and sending it to an XStream inbound server.<br>
You must implement the LCR construction logic in this method. If XStreamIn is not used, you can provide an empty implementation of this method.<br>
<br>
This method is invoked by XStreamIn inside a sendLCRCallback call to retrieve LCRs. You can return a null LCR to stop the sendLCRCallback execution.<br>
<br>
To construct LCR with LOB columns, you can use the createChunk() callback method to send the streaming chunk data.<br>
<br>
You must construct the partial LCR with all scalar columns and set the ChunkDataFlag to true using setChunkDataFlag() method. When XStream gets the partially constructed LCR with this chunkDataFlag set to true, the createChunk callback method is invoked to get the chunk data.<br>
<br>
The following is an example of implementing this API:<br>
Note that the example is not a complete implementation and only illustrates how to construct an LCR using the XStream APIs.<br>
<pre>

  public LCR createLCR()
    throws StreamsException
  {
    // first construct the lcr with scalar columns 
    DefaultRowLCR alcr = new DefaultRowLCR();

    alcr.setSourceDatabaseName("MY.TEST.DB");
    alcr.setSourceTime(getCurrentDate());
    alcr.setPosition(NUMBER.toBytes(1));
    alcr.setCommandType("INSERT");
    alcr.setObjectOwner("SCOTT");
    alcr.setObjectName("TEST_TABLE");
    alcr.setTransactionId("1.0.0");

    ColumnValue[] newValues = new DefaultColumnValue[4];
    try 
    {              
      CharacterSet mycharset = 
        CharacterSet.make(CharacterSet.AL16UTF16_CHARSET);
      newValues[0] = new DefaultColumnValue("ID",new NUMBER(1));
      newValues[1] = new DefaultColumnValue("CHAR_COLUMN", 
                                          new CHAR("chartest",mycharset));
      DefaultChunkColumnValue chunk1 = 
        new DefaultChunkColumnValue("LOB1_COLUMN", 
                                    null, ChunkColumnValue.CLOB);
      chunk1.setEmptyChunk(true);
      newValues[2] = chunk1;
      DefaultChunkColumnValue chunk2 = 
        new DefaultChunkColumnValue("LOB2_COLUMN", 
                                    null, ChunkColumnValue.BLOB);  
      chunk2.setEmptyChunk(true);
      newValues[3]  = chunk2;
    } 
    catch(Exception e)
    {
      System.out.println("fail to construct a lcr: "+e.getMessage());
      e.printStackTrace();
      throw new StreamsException("fail to create an LCR");
    }     
    alcr.setNewValues(newValues);
    alcr.setChunkDataFlag(true);

    // return this lcr to an XStream inbound Server
    return alcr;
  }
 </pre></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the LCR sent to an XStream inbound server.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="StreamsException.html" title="class in oracle.streams">StreamsException</a></code> - if error occurs when creating an LCR.</dd>
</dl>
</li>
</ul>
<a name="createChunk__" id="createChunk__"><!--   --></a>
<ul class="blockListLast">
<li class="blockList">
<h4>createChunk</h4>
<pre><a href="ChunkColumnValue.html" title="interface in oracle.streams">ChunkColumnValue</a> createChunk()
                      throws <a href="StreamsException.html" title="class in oracle.streams">StreamsException</a></pre>
<div class="block">The callback method for constructing chunk data that is sent to an XStream inbound server.<br>
You must implement the Chunk construction logic in this method. If XStream Inbound is not used, you can provide an empty implementation of this method.<br>
<br>
The following is an example of implementing this API:<br>
Note that the example is not a complete implementation and only illustrates how to construct chunk data using the XStream APIs.<br>
<pre>

  public ChunkColumnValue createChunk()
    throws StreamsException
  {
    // construct the chunk data
    ChunkColumnValue chunk = new DefaultChunkColumnValue(...); 
    ...

    if (last chunk in the column)
      chunk.setLastChunk(true)
    if (last chunk for the entire row)
      chunk.setEndOfRow(true);
    return chunk;
  }
 </pre></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the Chunk sent to an XStream inbound server.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="StreamsException.html" title="class in oracle.streams">StreamsException</a></code> - if error occurs when creating chunk data.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom" id="navbar_bottom"><!--   --></a>
<div class="skipNav"><a href="#skip_navbar_bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar_bottom_firstrow" id="navbar_bottom_firstrow"><!--   --></a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Oracle® Database XStream Java API Reference<br>
19c</b><br>
E96285-02</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="XStreamIn.html" title="class in oracle.streams"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="XStreamOut.html" title="class in oracle.streams"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html" target="_top">Frames</a></li>
<li><a href="XStreamLCRCallbackHandler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript">
<!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script></div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip_navbar_bottom" id="skip_navbar_bottom"><!--   --></a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"></p>
<center><small>Copyright © 2001, 2019, Oracle and/or its affiliates. All Rights Reserved.</small></center>
</body>
</html>
