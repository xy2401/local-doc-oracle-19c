<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_171) on Mon Jul 30 19:26:43 PDT 2018 -->
<title>DBLocaleSource (Oracle Database Globalization Development Kit Java API Reference)</title>
<meta name="date" content="2018-07-30">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>

    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.created" content="2019-01-06T07:46:54+00:00">
    <meta name="dcterms.title" content="Database Globalization Development Kit Java API Reference">
    <meta name="dcterms.category" content="database">
    <meta name="dcterms.isVersionOf" content="JVGDK">
    <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
    <meta name="dcterms.identifier" content="E96350-01">
    <meta name="dcterms.release" content="Release 19">
  <script id="ssot-metadata" type="application/json"> {"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}} </script>
    </head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DBLocaleSource (Oracle Database Globalization Development Kit Java API Reference)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Oracle&reg; Database Globalization Development Kit Java API Reference<br>19c</b><br>E96350-01</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="ApplicationDefault.html" title="class in oracle.i18n.servlet.localesource"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="HttpAcceptLanguage.html" title="class in oracle.i18n.servlet.localesource"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html" target="_top">Frames</a></li>
<li><a href="DBLocaleSource.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.oracle.i18n.servlet.localesource.LocaleSource">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#methods.inherited.from.class.oracle.i18n.servlet.localesource.LocaleSource">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">oracle.i18n.servlet.localesource</div>
<h2 title="Class DBLocaleSource" class="title">Class DBLocaleSource</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="LocaleSource.html" title="class in oracle.i18n.servlet.localesource">oracle.i18n.servlet.localesource.LocaleSource</a></li>
<li>
<ul class="inheritance">
<li>oracle.i18n.servlet.localesource.DBLocaleSource</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">DBLocaleSource</span>
extends <a href="LocaleSource.html" title="class in oracle.i18n.servlet.localesource">LocaleSource</a></pre>
<div class="block">The <code>DBLocaleSource</code> class is the predefined database locale
 source that accesses a user profile table including user locale preferences. 
 All user profile information can be specified in the GDK application 
 configuration file.
 Default caching: This locale source is cached in the session by default
 <p>
 The database locale source should use the special tag 
 <code>&lt;db-locale-source&gt;</code> to include the user profile 
 information in the list of the locale determination rules. The following 
 attributes are required:
 <ul>
 <li>
 <code>data-source-name</code>: the data source name that must
 be included in the data source definition file. For example, 
 <code>data-sources.xml</code> is used for the data source in OC4J. All 
 authentication information should be included in the data sources.
 </li>
 <li>
 <code>locale-source-table</code>: the name, optionally qualified with
 a schema name, of the table that contains the users' locale preferences.
 </li>
 <li>
 <code>user-column</code>: the name of the column in the locale source table
 that identifies the user for whom the given table row contains locale
 preference. Usually, the column contains user IDs, such as e-mail addresses,
 login names, etc.
 <b>Note:</b> The values in this column are compared case-insensitively.
 </li>
 <li>
 <code>user-key</code>: the name of the key used in the session object of the
 JSP/Java Servlet application to identify the current authenticated user.
 If the value for the key is not <code>null</code>, it is used to
 case-insensitively match the value in the <code>user-column</code> to find
 the user's locale preference. Otherwise the GDK assumes that no user is
 authenticated and DBLocaleSource cannot used.
 </li>
 </ul>
 </p><p>
 The attributes for the locale must be specified in one of the 
 following parameters depending on the scenario:
 </p><p>Scenario 1: If the user locale preference is stored in the form of ISO
 locale, use:
 <ul>
 <li>
 <code>locale-column</code>: the column that includes the ISO locale
 </li>
 </ul>
 </p>
 <p>Scenario 2: If the user locale preference is stored in the form of 
 Oracle language and Oracle territory names, use:
 <ul>
 <li>
 <code>language-column</code>: the column that includes the Oracle language
 name. This takes precedence over the value in <code>locale-column</code>.
 </li>
 <li>
 <code>territory-column</code>: the column that includes the Oracle
 territory name. This takes precedence over the value in
 <code>locale-column</code>.
 </li>
 </ul>
 </p>
 <p>Scenario 3: If the user locale preference is stored in the form of Oracle
 abbreviation language and territory names, use:
 <ul>
 <li>
 <code>short-language-column</code>: the column that includes the abbreviation
 of the Oracle language name. If both <code>language-column</code> and
 <code>short-language-column</code> are specified,
 <code>language-column</code> takes precedence.
 </li>
 <li>
 <code>territory-column</code>: the column that includes the Oracle
 territory name. This takes precedence over the value in
 <code>locale-column</code>.
 </li>
 </ul>
 </p>
 <p>Additionally, the following attributes may be specified:
 <ul>
 <li>
 <code>charset-column</code>: the column that includes the Oracle character
 set for the client. Note this is not the page character set information.
 </li>
 <li>
 <code>timezone-column</code>: the column that includes the time zone ID.
 </li>
 <li>
 <code>linguistic-sort-column</code>: the column that includes the Oracle
 linguistic sorting name.
 </li>
 <li>
 <code>date-format-column</code>: the column that includes the short date
 format mask.
 </li>
 <li>
 <code>long-date-format-column</code>: the column that includes the long
 date format mask.
 </li>
 <li>
 <code>time-format-column</code>: the column that includes the time format
 mask.
 </li>
 <li>
 <code>date-time-format-column</code>: the column that includes the short 
 date and time format mask.
 </li>
 <li>
 <code>long-date-time-format-column</code>: the column that includes the
 long date and time format mask.
 </li>
 <li>
 <code>number-format-column</code>: the column that includes the number 
 format mask.
 </li>
 <li>
 <code>currency-format-column</code>: the column that includes the currency
 format mask.
 </li>
 <li>
 <code>writing-direction-column</code>: the column that includes the writing
 direction, either <code>LTR</code> or <code>RTL</code>.
 </li>
 <li>
 <code>iso-currency-column</code>: the column that includes the ISO 4217
 currency ID.
 </li>
 <li>
 <code>diagnostics-level</code>: sets the amount of diagnostics information
 logged in the servlet log. The servlet log is the log that the servlet
 container provides for the Java EE javax.servlet.ServletContext.log()
 method. If <code>diagnostics-level</code> is set to "0" (default), nothing
 is logged. If it is set to "1", locale source configuration errors are
 logged. If it is set to "2", errors in the retrieved DB data are logged
 as well. Level "3" is reserved for tracing. The behavior for any other
 value is currently undefined. In a production environment, set the level
 low to prevent malicious requests from flooding the log file.
 </li>
 </ul>
 </p><p>
 The locale source table name and all column names must be either
 double-quoted or unquoted SQL identifiers. Double-quoted identifiers are
 used verbatim. Unquoted identifiers are converted to uppercase and
 double-quoted before use. The locale source table name may be prefixed
 with a schema name, which follows the same quoting rules.
 </p><p>
 The quoting discussed here pertains to attribute values after
 they have been retrieved from the XML configuration file, that is,
 after any XML escaping and quoting has already been interpreted and removed.
 Also, any character with the Unicode code point U+0020 or less
 is stripped from the beginning and end of the XML attribute value and
 from around the period separating schema and table name before the value
 is interpreted as an SQL identifier.
 </p><p>
 For example, if the configuration file contains:
 <pre>locale-source-table="app . user_profiles"</pre>
 </p><p>
 then the table name is treated as the schema-qualified unquoted identifier
 <code>app.user_profiles</code> and it is used as follows:
 <pre>SELECT ... FROM "APP"."USER_PROFILES";</pre>
 </p><p>
 However, if the configuration file contains:
 <pre>locale-source-table='"user profiles"'</pre>
 </p><p>
 or
 <pre>locale-source-table="&amp;quot;user profiles&amp;quot;"</pre>
 </p><p>
 then the table name is treated as the quoted identifier
 <code>"user profiles"</code> and it is used as follows:
 <pre>SELECT ... FROM "user profiles";</pre>
 </p><p>
 Example: Let's assume that the user locale and time zone preferences
 are used for globalized operations and the user schema table is specified as
 follows:
 <pre>
 create table user_profile
 (
   userid varchar2(100) primary key, -- user id
   ... (various user information)
   locale  varchar2(10), -- user locale preference, e.g., ja-JP
   timezone varchar2(50) -- user time zone preference,
                            e.g., America/Los_Angeles
 )
 </pre>
 </p><p>
 Let the data source file contain the following connection information:
 <pre>
 &lt;data-source class="com.evermind.sql.DriverManagerDataSource" 
   name="OracleDS"
   location="jdbc/OracleCoreDS" 
   xa-location="jdbc/xa/OracleXADS"
   ejb-location="jdbc/OracleDS"
   connection-driver="oracle.jdbc.driver.OracleDriver"
   username="yourapp"
   password="&lt;db password&gt;"
   url="jdbc:oracle:thin:@localhost:1521:orcl" 
   inactivity-timeout="30"
   /&gt;
 </pre>
 </p><p>
 Also, the application provides an authentication filter that sets
 <code>&quot;userinfo&quot;</code> to either the user id or <code>null</code> 
 in the session object so that the database locale source object can 
 determine if the user is authenticated or not.
 </p>
 <p>
 In such case, the locale determination rule should be specified
 as follows:
 <pre>
 &lt;locale-determine-rule&gt;
   &lt;db-locale-source 
    data-source-name="jdbc/OracleCoreDS" 
    locale-source-table="user_profiles"
    user-key="userinfo" 
    user-column="userid"
    locale-column="locale" 
    timezone-column="timezone" 
  &gt;oracle.i18n.servlet.localesource.DBLocaleSource&lt;/db-locale-source&gt;
  &lt;locale-source&gt;oracle.i18n.servlet.localesource.HttpAcceptLanguage&lt;/locale-source&gt;
 &lt;/locale-determine-rule&gt;
 </pre></p></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>10.1.0.2</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../serialized-form.html#oracle.i18n.servlet.localesource.DBLocaleSource">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.oracle.i18n.servlet.localesource.LocaleSource">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;oracle.i18n.servlet.localesource.<a href="LocaleSource.html" title="class in oracle.i18n.servlet.localesource">LocaleSource</a></h3>
<code><a href="LocaleSource.Alignment.html" title="class in oracle.i18n.servlet.localesource">LocaleSource.Alignment</a>, <a href="LocaleSource.Parameter.html" title="class in oracle.i18n.servlet.localesource">LocaleSource.Parameter</a>, <a href="LocaleSource.WritingDirection.html" title="class in oracle.i18n.servlet.localesource">LocaleSource.WritingDirection</a></code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.oracle.i18n.servlet.localesource.LocaleSource">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;oracle.i18n.servlet.localesource.<a href="LocaleSource.html" title="class in oracle.i18n.servlet.localesource">LocaleSource</a></h3>
<code><a href="LocaleSource.html#equals-java.lang.Object-">equals</a>, <a href="LocaleSource.html#getAttribute-java.lang.String-">getAttribute</a>, <a href="LocaleSource.html#getCharacterSet--">getCharacterSet</a>, <a href="LocaleSource.html#getCollator--">getCollator</a>, <a href="LocaleSource.html#getCurrencyFormat--">getCurrencyFormat</a>, <a href="LocaleSource.html#getDateFormat-int-">getDateFormat</a>, <a href="LocaleSource.html#getDateTimeFormat-int-">getDateTimeFormat</a>, <a href="LocaleSource.html#getISOCurrency--">getISOCurrency</a>, <a href="LocaleSource.html#getLocale--">getLocale</a>, <a href="LocaleSource.html#getLocaleSourceClass--">getLocaleSourceClass</a>, <a href="LocaleSource.html#getNumberFormat--">getNumberFormat</a>, <a href="LocaleSource.html#getTimeFormat--">getTimeFormat</a>, <a href="LocaleSource.html#getTimeZone--">getTimeZone</a>, <a href="LocaleSource.html#getWritingDirection--">getWritingDirection</a>, <a href="LocaleSource.html#hashCode--">hashCode</a>, <a href="LocaleSource.html#isCached--">isCached</a>, <a href="LocaleSource.html#isReadOnly--">isReadOnly</a>, <a href="LocaleSource.html#load--">load</a>, <a href="LocaleSource.html#setAttribute-java.lang.String-java.lang.Object-">setAttribute</a>, <a href="LocaleSource.html#setCharacterSet-java.lang.String-">setCharacterSet</a>, <a href="LocaleSource.html#setCollator-oracle.i18n.text.OraCollator-">setCollator</a>, <a href="LocaleSource.html#setCurrencyFormat-oracle.i18n.text.OraNumberFormat-">setCurrencyFormat</a>, <a href="LocaleSource.html#setDateFormat-int-oracle.i18n.text.OraDateFormat-">setDateFormat</a>, <a href="LocaleSource.html#setDateTimeFormat-int-oracle.i18n.text.OraDateFormat-">setDateTimeFormat</a>, <a href="LocaleSource.html#setISOCurrency-java.lang.String-">setISOCurrency</a>, <a href="LocaleSource.html#setLocale-java.util.Locale-">setLocale</a>, <a href="LocaleSource.html#setLocale-java.util.Locale-oracle.i18n.servlet.ApplicationContext-">setLocale</a>, <a href="LocaleSource.html#setLocaleSourceClass-java.lang.Class-">setLocaleSourceClass</a>, <a href="LocaleSource.html#setNumberFormat-oracle.i18n.text.OraNumberFormat-">setNumberFormat</a>, <a href="LocaleSource.html#setTimeFormat-oracle.i18n.text.OraDateFormat-">setTimeFormat</a>, <a href="LocaleSource.html#setTimeZone-java.util.TimeZone-">setTimeZone</a>, <a href="LocaleSource.html#setWritingDirection-oracle.i18n.servlet.localesource.LocaleSource.WritingDirection-">setWritingDirection</a>, <a href="LocaleSource.html#store--">store</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Oracle&reg; Database Globalization Development Kit Java API Reference<br>19c</b><br>E96350-01</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="ApplicationDefault.html" title="class in oracle.i18n.servlet.localesource"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="HttpAcceptLanguage.html" title="class in oracle.i18n.servlet.localesource"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html" target="_top">Frames</a></li>
<li><a href="DBLocaleSource.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.oracle.i18n.servlet.localesource.LocaleSource">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#methods.inherited.from.class.oracle.i18n.servlet.localesource.LocaleSource">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><center>Copyright &copy; 2003, 2019, Oracle and/or its affiliates. All rights reserved.</center></small></p><p></p>
</body>
</html>
